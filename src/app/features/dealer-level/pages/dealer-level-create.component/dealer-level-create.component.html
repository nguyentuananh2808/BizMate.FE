<div class="flex">
  <app-menu class="bg-background-dark"></app-menu>

  <div class="bg-login" [ngClass]="{ dark: isDark }">
    <div
      class="px-4 pt-6 z-10 relative"
      [ngClass]="{ 'dark:bg-gray-900': isDark }"
    >
      <!-- Mobile header bar -->
      <div
        *ngIf="isMobile"
        class="fixed bg-[rgb(247,251,255)] dark:bg-background-dark p-3 rounded-[24px] w-[94%] mb-16"
      >
        <!-- Header -->
        <header-common></header-common>

        <!-- Mobile header bar -->
        <div
          *ngIf="isMobile"
          class="mb-4 flex items-center justify-between gap-3"
        >
          <!-- Nút Quay lại -->
          <button
            type="button"
            class="rounded-full bg-gray-200 text-gray-700 px-2 py-1 hover:bg-gray-300 transition flex items-center w-8 h-8"
            (click)="goBack()"
            [ngClass]="{
              'dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600':
                isDark
            }"
          >
            <nz-icon nzType="arrow-left" nzTheme="outline"></nz-icon>
          </button>

          <!-- Ô tìm kiếm căn giữa -->
          <input
            type="text"
            class="flex-1 border border-gray-300 rounded-[24px] px-3 py-2 mx-2"
            [(ngModel)]="searchKeyword"
            placeholder="Tìm kiếm..."
            [ngClass]="{
              'dark:bg-gray-800 dark:text-gray-100 dark:border-gray-600': isDark
            }"
          />
          <!-- Print Button -->
          <button
            disabled
            (click)="onPrint()"
            type="button"
            class="px-3 py-2 rounded-[24px] bg-green-600 text-white hover:bg-green-700 transition whitespace-nowrap flex items-center gap-1"
          >
            <nz-icon nzType="printer" nzTheme="outline"></nz-icon>
          </button>
        </div>

        <!-- Mobile Form -->
        <div
          *ngIf="isMobile"
          class="bg-[rgba(233,233,233,0.87)] dark:bg-gray-900 flex flex-col rounded-[24px]"
        >
          <!-- Scrollable content -->
          <div class="overflow-y-auto px-3 py-4 space-y-4 max-h-[76vh]">
            <div
              class="shadow-lg rounded-[24px] overflow-hidden p-4 w-full m-1"
              [ngClass]="{ 'dark:bg-gray-900': isDark }"
            >
              <form [formGroup]="DealerLevelForm" class="space-y-4">
                <!-- Các input -->
                <div>
                  <label
                    class="block mb-1 text-secondary-light dark:text-secondary-dark"
                  >
                    Đại lý cấp
                  </label>
                  <input
                    formControlName="dealerLevelName"
                    class="input-style w-full"
                    placeholder="Nhập đại lý cấp..."
                  />
                </div>

                <div class="flex justify-end">
                  <button
                    nz-button
                    nzType="primary"
                    class="rounded-[24px] h-10 px-6"
                    (click)="submitForm()"
                  >
                    <nz-icon nzType="save" nzTheme="outline"></nz-icon>
                    <span *ngIf="isSubmitting">Đang tạo...</span>
                    <span *ngIf="!isSubmitting">Tạo đại lý cấp</span>
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>

      <!-- Desktop header bar -->
      <div *ngIf="!isMobile">
        <!-- Header -->
        <header-common></header-common>
        <div class="mb-4 flex items-center justify-between gap-4">
          <!-- page name -->
          <h1
            class="text-secondary-light dark:text-secondary-dark text-xl font-bold"
          >
            Tạo đại lý cấp
          </h1>

          <!-- Ô tìm kiếm căn giữa -->
          <input
            type="text"
            class="border border-gray-300 rounded-[24px] px-3 py-2 w-[58%] mx-auto"
            [(ngModel)]="searchKeyword"
            placeholder="Tìm kiếm..."
            [ngClass]="{
              'dark:bg-gray-800 dark:text-gray-100 dark:border-gray-600': isDark
            }"
          />

          <!-- Nhóm nút -->
          <div class="flex gap-3">
            <!-- Print Button -->
            <!-- <button
              (click)="onPrint()"
              type="button"
              class="px-3 py-2 rounded-[24px] bg-green-600 text-white hover:bg-green-700 transition whitespace-nowrap flex items-center gap-1"
            >
              <nz-icon nzType="printer" nzTheme="outline"></nz-icon> In phiếu
            </button> -->

            <!-- Nút Quay lại -->
            <button
              type="button"
              class="rounded-full bg-gray-200 text-gray-700 px-4 py-2 hover:bg-gray-300 transition flex items-center gap-2"
              (click)="goBack()"
              [ngClass]="{
                'dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600':
                  isDark
              }"
            >
              <span>Quay lại</span>
              <nz-icon nzType="arrow-right" nzTheme="outline"></nz-icon>
            </button>
          </div>
        </div>
      </div>

      <!-- desktop -->
      <div *ngIf="!isMobile">
        <div
          class="bg-background-lightblue dark:bg-background-dark shadow-lg rounded-[24px] overflow-hidden p-3 w-full"
          [ngClass]="{ 'dark:bg-gray-900': isDark }"
        >
          <div class="w-full">
            <!-- <div class="flex items-center justify-between px-3 pt-3">
              <h2 class="text-secondary-light dark:text-secondary-dark">
                Ngày xuất : {{ dateToday | date : "dd/MM/yyyy" }}
              </h2>
            </div> -->

            <form [formGroup]="DealerLevelForm" class="space-y-6 pl-3 pt-3">
              <div class="grid  gap-4">
                <div>
                  <label
                    class="block mb-1 text-secondary-light dark:text-secondary-dark"
                  >
                    Đại lý cấp
                  </label>
                  <input
                    formControlName="dealerLevelName"
                    class="input-style"
                    placeholder="Nhập đại lý cấp..."
                  />
                </div>
              </div>
              <div class="flex justify-end">
                <button
                  nz-button
                  nzType="primary"
                  class="rounded-[24px] h-10 px-6"
                  (click)="submitForm()"
                >
                  <nz-icon nzType="save" nzTheme="outline"></nz-icon>
                  <span *ngIf="isSubmitting">Đang tạo...</span>
                  <span *ngIf="!isSubmitting">Tạo đại lý cấp</span>
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- Bottom menu -->
    <bottom-menu class="mt-6"></bottom-menu>
    <!-- <product-popup-search
      *ngIf="isPopupSearchProducts"
      [shouldDisableProduct]="true"
      [existingProducts]="listOfData"
      (closePopup)="closeProductPopup()"
      (selectProducts)="onSelectedProducts($event)"
    ></product-popup-search> -->
  </div>
</div>
